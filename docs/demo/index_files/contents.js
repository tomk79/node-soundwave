document.addEventListener("DOMContentLoaded",(function(){var e,t,n,d;e=document.getElementById("audio-sample"),t=$("#volume-indicator__audio-element-left"),n=$("#volume-indicator__audio-element-right"),new SoundWave(e,{destination:!0,channels:2}).on("sound",(function(d){var o=100*d[0]+"%",a=100*d[1]+"%";e.ended&&(o="0%",a="0%"),t.text("Level: ".concat(o)),t.css({width:o}),n.text("Level: ".concat(a)),n.css({width:a})}));var o=[];navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){var t=$("#volume-indicator__user-media");new SoundWave(e,{destination:!0}).on("sound",(function(e){var n=100*e[0]+"%";t.text("Level: ".concat(n)),t.css({width:n})})),(d=new MediaRecorder(e)).addEventListener("dataavailable",(function(e){o.push(e.data)})),d.addEventListener("stop",(function(){var e=new Blob(o,{type:"audio/mp3"}),t=URL.createObjectURL(e),n=document.getElementById("btn-rec-download");n.href=t,n.download="recorded_audio.mp3",n.textContent="ダウンロード",$(n).trigger("click")}))}));var a=$("#btn-rec-start"),i=$("#btn-rec-stop");a.on("click",(function(){a.prop("disabled",!0),i.prop("disabled",!1),d.start()})),i.on("click",(function(){a.prop("disabled",!1),i.prop("disabled",!0),d.stop()}))}));